{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "lcs.artifact.design.v1",
  "title": "LCS Design Artifact v1",
  "type": "object",
  "required": [
    "contract_version",
    "unit_id",
    "generated_at",
    "instructional_strategy",
    "pedagogy_decisions",
    "metadata"
  ],
  "properties": {
    "contract_version": {
      "type": "string",
      "pattern": "^1\\.0\\.0$"
    },
    "unit_id": {
      "type": "string",
      "pattern": "^[0-9]{3,}-[a-z0-9-]+$"
    },
    "generated_at": {
      "type": "string",
      "format": "date-time"
    },
    "instructional_strategy": {
      "type": "object",
      "required": [
        "primary_method",
        "secondary_methods",
        "rationale"
      ],
      "properties": {
        "primary_method": {"type": "string", "minLength": 1},
        "secondary_methods": {
          "type": "array",
          "maxItems": 2,
          "items": {"type": "string", "minLength": 1}
        },
        "rationale": {"type": "string", "minLength": 1}
      },
      "additionalProperties": true
    },
    "pedagogy_decisions": {
      "type": "object",
      "required": [
        "profile",
        "confidence_threshold",
        "confidence",
        "candidate_methods",
        "scores",
        "selection_rules",
        "research"
      ],
      "properties": {
        "profile": {"type": "string", "const": "corporate-lnd-v1"},
        "confidence_threshold": {"type": "number", "minimum": 0, "maximum": 1},
        "confidence": {"type": "number", "minimum": 0, "maximum": 1},
        "candidate_methods": {
          "type": "array",
          "minItems": 1,
          "items": {"type": "string", "minLength": 1}
        },
        "scores": {
          "type": "object",
          "required": [
            "learner_fit",
            "outcome_fit",
            "evidence_fit",
            "delivery_fit",
            "accessibility_fit"
          ],
          "properties": {
            "learner_fit": {"type": "number", "minimum": 0, "maximum": 5},
            "outcome_fit": {"type": "number", "minimum": 0, "maximum": 5},
            "evidence_fit": {"type": "number", "minimum": 0, "maximum": 5},
            "delivery_fit": {"type": "number", "minimum": 0, "maximum": 5},
            "accessibility_fit": {"type": "number", "minimum": 0, "maximum": 5}
          },
          "additionalProperties": false
        },
        "selection_rules": {
          "type": "object",
          "required": ["max_secondary_methods", "score_delta_threshold"],
          "properties": {
            "max_secondary_methods": {"type": "integer", "minimum": 0, "maximum": 2},
            "score_delta_threshold": {"type": "number", "minimum": 0, "maximum": 5}
          },
          "additionalProperties": true
        },
        "research": {
          "type": "object",
          "required": ["required", "triggers", "evidence_refs"],
          "properties": {
            "required": {"type": "boolean"},
            "triggers": {"type": "array", "items": {"type": "string", "minLength": 1}},
            "evidence_refs": {"type": "array", "items": {"type": "string", "minLength": 1}}
          },
          "additionalProperties": true
        }
      },
      "additionalProperties": true
    },
    "metadata": {
      "type": "object",
      "required": ["audience", "duration_minutes", "modality"],
      "properties": {
        "audience": {"type": "string", "minLength": 1},
        "duration_minutes": {"type": "integer", "minimum": 1},
        "modality": {"type": "string", "minLength": 1}
      },
      "additionalProperties": true
    }
  },
  "additionalProperties": true
}
